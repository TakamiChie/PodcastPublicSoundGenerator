# Podcast Public Sound Generator

このアプリケーションは、ポッドキャスト音源にBGMを重ねてダウンロードできる簡易Flaskアプリです。

## 使い方
1. `bgm/` フォルダーにBGMのMP3ファイルを入れてください。ドロップダウンにはID3のタイトルが表示されます。
2. `pip install -r requirements.txt` で依存ライブラリをインストールします（`pydub`の利用にはffmpegが必要です）。
3. `npm install` を実行してフロントエンドの依存ライブラリをインストールします。
4. `python app.py` を実行し、ブラウザで `http://localhost:5000` にアクセスします。
5. ポッドキャスト音声をアップロードし、BGMを選択すると、合成されたMP3をダウンロードできます。フォームのタイトル、ジャンル、アーティストを入力するとID3タグに反映されます。
6. 音声ファイル名が`YYYY-MM-DD`形式の場合は、BGMファイル名から自動的に候補が選択されます。
7. カバーアートはプレビュー後、ダウンロード時に3000px×3000pxのPNGとして保存されます。
8. 「アーカイブ音声ダウンロード」からタグのみ付与したMP3を取得できます。こちらでも同じ入力内容がID3に書き込まれます。

## レンタルサーバーでのCGI実行
1. `cgi_handler.py` を `cgi-bin` ディレクトリに配置します。
2. 必要に応じてスクリプトの先頭行をレンタルサーバーの Python3.8 へのパスに変更します。
3. ブラウザから `cgi_handler.py` へアクセスするとアプリが起動します。

## Windows 11のIISでの実行
1. `requirements.txt` をインストールした後、`pip install wfastcgi` を実行します。
2. `web.config` をアプリケーションのルートに配置し、`scriptProcessor` のパスを自分の環境に合わせて変更します。
3. IIS マネージャーでアプリケーションを作成し、ブラウザからアクセスします。
